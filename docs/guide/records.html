<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Icicle Lang - Records</title>
  <meta name="description" content>
  <meta name="author" content>

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/skeleton.css">
  <link rel="stylesheet" href="../css/syntax.css">
  <link rel="stylesheet" href="../css/custom.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

  <!-- ATOM Feed
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="../atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />

</head>
<body>
  <a href="https://github.com/icicle-lang/icicle" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  <!-- Primary Body
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container">
    <div class="three columns sidebar">
        <nav>
            <h3 id="logo">Icicle</h3>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../developer-blog.html">Developer Blog</a></li>
                <li><a href="../pages/about.html">About</a></li>
                <li><a href="../pages/benchmarks.html">Benchmarks</a></li>
                <li><a href="../pages/collaboration.html">Collaboration</a></li>
            </ul>

            <h3 id="logo">Guide</h3>
            <ul>
                <li><a href="../guide/introduction.html">Introduction</a></li>
                <li><a href="../guide/syntax.html">Syntax</a></li>
                <li><a href="../guide/contexts.html">Contexts</a></li>
                <li><a href="../guide/types.html">Types</a></li>
                <li><a href="../guide/modalities.html">Modalities</a></li>
                <li><a href="../guide/records.html">Records</a></li>
            </ul>

        </nav>
        &nbsp;
    </div>

    <div class="nine columns content">
        <h1>Records</h1>

        <p>Records are a light-weight type with named fields which are extremely easy to access in a clear way.</p>
<p>In Icicle, records will often be used as the input for queries, but they can also be inputs and returned values of functions; and used to make queries easier to understand.</p>
<p>Records have no runtime cost, and are flattened to their individual fields in generated C code.</p>
<h2 id="comparisons-to-other-languages">Comparisons to other languages</h2>
<p>Records in Icicle are very similar to that of Elm or Purescript, and quite similar to objects in JavaScript.</p>
<p>When comparing records to JavaScript:</p>
<ul>
<li>It is a type error to attempt to extract a field from a record which does not exist;</li>
<li>Fields in a record will always exist and be of the correct type; and</li>
<li>There is no ‘this’ keyword or internal hidden state.</li>
</ul>
<h2 id="creating-and-accessing-records">Creating and Accessing Records</h2>
<p>Records are very easy to create syntactically, in a way which will seem familiar to JavaScript developers and others.</p>
<p>For example, a record from a library might reference books:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>{ <span class="fu">author</span> <span class="op">=</span> <span class="st">&quot;Becky Chambers&quot;</span><span class="op">,</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>  <span class="fu">title</span> <span class="op">=</span> <span class="st">&quot;A Closed and Common Orbit&quot;</span><span class="op">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>  <span class="fu">available</span> <span class="op">=</span> <span class="dt">False</span><span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>  <span class="fu">acquired</span> <span class="op">=</span> <span class="dv">2020</span><span class="op">-</span><span class="dv">10</span><span class="op">-</span><span class="dv">05</span><span class="op">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>The type will be inferred as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>{ <span class="fu">acquired</span> : <span class="dt">Time</span><span class="op">,</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>  <span class="fu">author</span> : <span class="dt">String</span><span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>  <span class="fu">available</span> : <span class="dt">Bool</span><span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>  <span class="fu">title</span> : <span class="dt">String</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>To retrieve a value from a record, one can use a ‘dot’ syntax.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">let</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>  <span class="fu">book</span> <span class="op">=</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    { <span class="fu">author</span> <span class="op">=</span> <span class="st">&quot;Becky Chambers&quot;</span><span class="op">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>      <span class="fu">title</span> <span class="op">=</span> <span class="st">&quot;A Closed and Common Orbit&quot;</span><span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>      <span class="fu">available</span> <span class="op">=</span> <span class="dt">False</span><span class="op">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>      <span class="fu">acquired</span> <span class="op">=</span> <span class="dv">2020</span><span class="op">-</span><span class="dv">10</span><span class="op">-</span><span class="dv">05</span><span class="op">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>    }</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="kw">in</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>  <span class="fu">book</span><span class="op">.</span><span class="fu">author</span></span></code></pre></div>
<p>Some other values can use record dot syntax as well, namely, times. Although times are not implemented as records, one can extract the year, month, and day from as such</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="kw">let</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>  <span class="fu">book</span> <span class="op">=</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>    { <span class="fu">author</span> <span class="op">=</span> <span class="st">&quot;Becky Chambers&quot;</span><span class="op">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>      <span class="fu">title</span> <span class="op">=</span> <span class="st">&quot;A Closed and Common Orbit&quot;</span><span class="op">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>      <span class="fu">available</span> <span class="op">=</span> <span class="dt">False</span><span class="op">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>      <span class="fu">acquired</span> <span class="op">=</span> <span class="dv">2020</span><span class="op">-</span><span class="dv">10</span><span class="op">-</span><span class="dv">05</span><span class="op">,</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    }</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="kw">in</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>  <span class="fu">book</span><span class="op">.</span><span class="fu">acquired</span><span class="op">.</span><span class="fu">year</span></span></code></pre></div>
<p>The way this works is that when dot syntax is used, the type checker emits a constraint</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">result</span> <span class="op">=</span>: <span class="dt">HasField</span> <span class="fu">input</span> <span class="fu">x</span></span></code></pre></div>
<p>Which can be read as</p>
<blockquote>
<p>For all types ‘input’, the type ‘input’ must have a field called “x”, which in turn is of type ‘result’.</p>
</blockquote>
<p>This can be satisfied if the type <code>input</code> is a record which does indeed have the field <code>x</code> of type <code>result</code>.</p>
<p>Additional rules mean that the <code>time</code> type can satisfy this constrain for timely field names.</p>
  </div>

<!-- End Body
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>